{% extends "base.html" -%}

{% block main -%}
<div class="main-content-dark smaller-column text-white">
  <div class="container">
    <a href="#" id="back-link">
      <img style="width:25px" class="mb-3" src='data:image/svg+xml,<%3Fxml version="1.0" encoding="iso-8859-1"%3F><svg fill="%23fff" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 384.97 384.97" xml:space="preserve"><g><g id="Arrow_Left_Circle"><path d="M192.485,0C86.185,0,0,86.185,0,192.485C0,298.797,86.185,384.97,192.485,384.97c106.312,0,192.485-86.173,192.485-192.485C384.97,86.185,298.797,0,192.485,0z M192.485,360.909c-93.018,0-168.424-75.406-168.424-168.424S99.467,24.061,192.485,24.061s168.424,75.406,168.424,168.424S285.503,360.909,192.485,360.909z"/><path d="M300.758,180.226H113.169l62.558-63.46c4.692-4.74,4.692-12.439,0-17.179c-4.704-4.74-12.319-4.74-17.011,0l-82.997,84.2c-2.25,2.25-3.537,5.414-3.537,8.59c0,3.164,1.299,6.328,3.525,8.59l82.997,84.2c4.704,4.752,12.319,4.74,17.011,0c4.704-4.752,4.704-12.439,0-17.191l-62.558-63.46h187.601c6.641,0,12.03-5.438,12.03-12.151C312.788,185.664,307.398,180.226,300.758,180.226z"/></g></g></svg>' alt="back">
    </a>
    <div class="row">
      <div class="col">
        <h3>{{ participant.first_name }} {{ participant.last_name }}{{' (student)' if participant.student}}</h3>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col">
        <h4>{{ participant.email }}</h4>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col">
        <p>
          {% if participant.paid_registration -%}
          Paid {{ participant.payment.value }}€ on {{ participant.payment.concluded.strftime('%d/%m/%Y') }} (via {{'MBWay' if participant.payment.method == 1 else 'Credit card' }})
          {% else -%}
            Participant has not paid yet
          {% endif %}
        </p>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col">
        <h5 class="mt-2">Submitted abstracts:</h5>
        <div class="mb-3">
        {% for abstract in participant.submitted_abstracts %}
          <div class="submitted-abstract rounded-3 ps-4 my-2 py-2">
            <a data-abstract-id="{{ abstract.id }}" class="submitted-abstract" href="{{ url_for('IX_IPC.abstract_details', language=lang, id=abstract.id) }}">
              <p class="mb-0">Type: {{'oral presentation' if abstract.abstract_type == 2 else 'poster'}}</p>
              <p class="mb-0">Title: {{abstract.title}}</p>
              <p class="mb-0">Keywords: {{abstract.keywords}}</p>  
            </a>
          </div>
        {% else %}
          <p class="mb-0">No submitted abstracts</p>
        {% endfor %}
        </div>    
      </div>
    </div>

    {# <div class="row mb-3">
      <div class="col">
        <h5 class="mb-0">Abstract:</h5>
        <p class="ms-3">{{ abstract.abstract }}</p>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col">
        <h5>Authors:</h5>
        {% for a in abstract.authors -%}
          <div class="ms-3 mb-3">
            <p class="mb-0"><span class="{{ 'presenter' if a.presenter }}">{{a.author.first_name}} {{a.author.last_name}}</span> ({{a.author.email}})</p>
            {% for af in a.affiliations -%}
            <p class="mt-0 mb-0">
              {{ af.institution.name }} — {{ af.institution.country }} ({{ af.institution.address }})
            </p>  
          {% endfor -%}
          </div>
        {% endfor -%}
      </div>
    </div>
    <div class="row mb-3">
      <div class="col">
        <h5>Keywords:</h5>
        <p class="ms-3">{{abstract.keywords}}</p>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col">
        <h5>Submitted by:</h5>
        <p class="ms-3">{{abstract.user.first_name}} {{abstract.user.last_name}} ({{abstract.user.email}})</p>
      </div>
    </div> #}
  </div>
</div>
{% include "scripts/utilities.html" -%}
<script defer>
  makeBackLink('back-link', "{{ url_for('IX_IPC.management') }}");
</script>
{% endblock -%}